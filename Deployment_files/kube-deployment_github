apiVersion: v1
kind: Pod
metadata:
  name: roboto-test-pod
  namespace: discord-bot-py
  labels:
    app: roboto
spec:
  containers:
  - name: roboto
    image: ghcr.io/akvanvig/discord-bot-py_no-audio:latest
    command: ["python3", "-m", "http.server", "80"]

    volumeMounts:
      - name: config
        mountPath: Discord-bot-py/config/bot.json
        subPath: bot.json
        readOnly: true
      - name: secrets
        mountPath: Discord-bot-py/config/secrets.json
        subPath: secrets.json
        readOnly: true
      - name: audiofiles
        mountPath: Discord-bot-py/bot/media

  volumes:
    - name: config
      configMap:
        name: discord-py-config
    - name: secrets
      secret:
        secretName: discord-py-secrets
    - name: audiofiles
      persistentVolumeClaim:
        claimName: nfs-robotoaudiofiles

  restartPolicy: Never
