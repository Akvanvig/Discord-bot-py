apiVersion: v1
kind: Pod
metadata:
  name: roboto-test-pod
  namespace: roboto
  labels:
    app: roboto
spec:
  containers:
  - name: roboto
    image: ghcr.io/akvanvig/mrroboto_no-audio:latest
    command: ["python3", "-m", "http.server", "80"]

    volumeMounts:
      - name: config
        mountPath: MrRoboto/config/bot_config.json
        subPath: bot_config.json
        readOnly: true
      - name: secrets
        mountPath: MrRoboto/config/bot_secrets.json
        subPath: bot_secrets.json
        readOnly: true
      - name: audiofiles
        mountPath: MrRoboto/media
      - name: bot-files
        mountPath: MrRoboto/bot

  volumes:
    - name: config
      configMap:
        name: robotobot-config
    - name: secrets
      secret:
        secretName: robotobot-secrets
    - name: audiofiles
      persistentVolumeClaim:
        claimName: nfs-robotoaudiofiles-claim
    - name: bot-files
      persistentVolumeClaim:
        claimName: nfs-robototest-claim

  restartPolicy: Never
